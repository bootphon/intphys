# Postprocessing for intphys datasets generation

## Synopsis

This program takes as input a raw dataset directory, as generated by
`intphys.py` or `intphys_parallel.sh`. It transforms the directory in place and
make the following changes:

* converts scene images from RGBA to RGB
* converts the `.bin` depth files into grayscale depth fields (normalized wrt
  the dataset global maximum depth).
* scrambles the masks images (each object is changing of mask at each frame) and
  converts RGBA to grayscale.
* update the `status.json` files with the new depth and masks.


## Compile

First install the dependencies. On Debian/Ubuntu:

    sudo apt install \
        libboost-filesystem-dev \
        libboost-program-options-dev \
        rapidjson-dev \
        libpng++-dev \
        cmake

Then compile the program:

    mkdir -p ./build
    cd ./build
    cmake ..
    make -j $(nproc)

## Run

Call the postprocessing program as:

    ./build/postprocessing <directory>

By default the program uses all the available cores on the system. You can
specify the number of cores used with the `--njobs` option:

    ./build/postprocess <dircetory> --njobs 1
